@import "tailwindcss";
@import "tw-animate-css";

@custom-variant dark (&:is(.dark *));

:root { color-scheme: dark; --bg:#0b0f1a; --bg-soft:#0f1626; --card: oklch(1 0 0); --border: oklch(0.922 0 0); --text:#e7ecf6; --muted: oklch(0.97 0 0); --accent: oklch(0.97 0 0); --ok:#22c55e; --warn:#eab308; --danger:#ef4444; --sidebar: oklch(0.985 0 0); --radius: 0.625rem; --space-1:6px; --space-2:10px; --space-3:14px; --space-4:18px; --space-5:24px; font-family: Inter, ui-sans-serif, system-ui, Arial, sans-serif; --background: oklch(1 0 0); --foreground: oklch(0.145 0 0); --card-foreground: oklch(0.145 0 0); --popover: oklch(1 0 0); --popover-foreground: oklch(0.145 0 0); --primary: oklch(0.205 0 0); --primary-foreground: oklch(0.985 0 0); --secondary: oklch(0.97 0 0); --secondary-foreground: oklch(0.205 0 0); --muted-foreground: oklch(0.556 0 0); --accent-foreground: oklch(0.205 0 0); --destructive: oklch(0.577 0.245 27.325); --input: oklch(0.922 0 0); --ring: oklch(0.708 0 0); --chart-1: oklch(0.646 0.222 41.116); --chart-2: oklch(0.6 0.118 184.704); --chart-3: oklch(0.398 0.07 227.392); --chart-4: oklch(0.828 0.189 84.429); --chart-5: oklch(0.769 0.188 70.08); --sidebar-foreground: oklch(0.145 0 0); --sidebar-primary: oklch(0.205 0 0); --sidebar-primary-foreground: oklch(0.985 0 0); --sidebar-accent: oklch(0.97 0 0); --sidebar-accent-foreground: oklch(0.205 0 0); --sidebar-border: oklch(0.922 0 0); --sidebar-ring: oklch(0.708 0 0); }
* { box-sizing: border-box; }
body { margin: 0; color: var(--text); background: linear-gradient(180deg, rgba(12,18,32,0.9), rgba(12,18,32,0.95)), var(--bg); }
.container { max-width: 1200px; margin: 0 auto; padding: var(--space-5); }
h1 { margin: 0 0 var(--space-3); font-size: 26px; letter-spacing: 0.2px; }
h2 { margin: 0 0 var(--space-2); font-size: 20px; letter-spacing: 0.2px; }
h3 { margin: 0; font-size: 16px; letter-spacing: 0.2px; }

.header { position: fixed; top: 0; left: 0; right: 0; z-index: 40; backdrop-filter: blur(10px); background: rgba(11,15,26,0.95); border-bottom: 1px solid var(--border); }
.header-inner { display:flex; align-items:center; justify-content:space-between; gap:12px; padding: 12px 24px; }
.brand { display:flex; align-items:center; gap:10px; font-weight:800; letter-spacing:0.3px; }
.brand-badge { width:28px; height:28px; border-radius:6px; background: linear-gradient(135deg, var(--accent), var(--accent-2)); display:flex; align-items:center; justify-content:center; font-size:14px; }

.layout { display:block; }
.sidebar { position: fixed; top: 64px; left: 0; width: var(--sidebar); height: calc(100vh - 64px); padding: 14px 10px; border-right: 1px solid var(--border); background: rgba(15,22,38,0.92); backdrop-filter: blur(8px); z-index: 30; }
.nav { display:flex; flex-direction:column; gap:6px; margin-top: 8px; }
.nav a { color: var(--muted); padding: 10px 12px; border-radius: 8px; text-decoration:none; display:block; }
.nav a.active, .nav a:hover { color: var(--text); background: rgba(59,130,246,0.16); }
.content { margin-left: calc(var(--sidebar) + 16px); padding: var(--space-5); padding-top: 80px; }

.card { background: var(--card); border: 1px solid var(--border); border-radius: var(--radius); padding: var(--space-4); margin-top: var(--space-4); box-shadow: 0 8px 24px rgba(0,0,0,0.22); transition: transform .15s ease, box-shadow .15s ease, border-color .15s ease; }
.card:hover { transform: translateY(-2px); box-shadow: 0 14px 28px rgba(0,0,0,0.28); border-color: #2a3b63; }
.card.sub { background: rgba(13,20,34,0.6); }
.card.highlight { outline: 2px solid var(--accent-2); }
.card-header { display: flex; align-items: center; gap: var(--space-2); justify-content: space-between; margin-bottom: var(--space-2); }

.form .row { display: flex; gap: var(--space-2); align-items: flex-end; margin-bottom: var(--space-2); flex-wrap: wrap; }
.col { flex: 1; min-width: 200px; }
.col.end { display: flex; justify-content: flex-end; }
label { display: block; font-size: 13px; color: var(--muted); margin-bottom: 6px; }
input, select { width: 100%; padding: 9px 12px; border-radius: 8px; border: 1px solid var(--border); background: #0b1324; color: var(--text); font-size: 14px; outline: none; transition: border-color .15s ease, box-shadow .15s ease; }
input:focus, select:focus { border-color: var(--accent); box-shadow: 0 0 0 3px rgba(59,130,246,0.2); }
button { padding: 9px 13px; border-radius: 8px; cursor: pointer; font-weight: 600; transition: filter .15s ease, transform .02s ease; }
button:hover { filter: brightness(1.05); }
button:active { transform: translateY(1px); }
button[disabled] { opacity: 0.6; cursor: default; }
.link { background: transparent; color: #93c5fd; border: 0; padding: 0; margin-right: 10px; text-decoration: none; cursor: pointer; }
.link:hover { text-decoration: underline; }
.inline { display: flex; align-items: center; gap: 8px; font-size: 14px; color: #c5d2ee; }

.row { display: flex; gap: 12px; align-items: center; flex-wrap: wrap; }
.terms > div { min-width: 100px; }
.muted { color: var(--muted); }
.small { font-size: 12px; }

.badge { background: rgba(30,41,59,0.6); border: 1px solid #334155; padding: 4px 8px; border-radius: 999px; font-size: 12px; color: #cfe1ff; }
.error { color: #fecaca; }

.gauge { position: relative; height: 28px; background: #0c1529; border: 1px solid #1f2a44; border-radius: 999px; overflow: hidden; }
.gauge-fill { height: 100%; background: linear-gradient(90deg, var(--ok), var(--warn), var(--danger)); }
.gauge-text { position: absolute; inset: 0; display: flex; align-items: center; justify-content: center; font-weight: 700; text-shadow: 0 1px 0 rgba(0,0,0,0.6); }

.pill { display: flex; align-items: center; justify-content: space-between; gap: 8px; padding: 8px 12px; border-radius: 999px; border: 1px solid #223154; min-width: 140px; background: #0c1529; }
.pill.low { border-color: #1e7040; background: rgba(34,197,94,0.08); }
.pill.medium { border-color: #665c1a; background: rgba(234,179,8,0.1); }
.pill.high { border-color: #7a1e1e; background: rgba(239,68,68,0.1); }
.pill-label { color: #9fb6e1; font-size: 12px; }
.pill-level { font-weight: 700; }

.grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(260px, 1fr)); gap: 12px; }

details.debug { margin-top: 10px; }
details.debug summary { cursor: pointer; color: #93a4c7; }

/* Tables */
table { width: 100%; border-collapse: collapse; }
th, td { padding: 10px 12px; border-bottom: 1px solid #1a2540; }
thead th { font-weight: 600; color: var(--muted); text-transform: none; font-size: 13px; }
tbody tr:hover { background: rgba(59,130,246,0.05); }

/* Table container */
.table-responsive { width: 100%; overflow-x: auto; }
.table-compact th, .table-compact td { padding: 8px 10px; font-size: 13px; }

/* Badges */
.badge-success { background: rgba(34,197,94,0.12); border-color: #166534; color: #86efac; }
.badge-warning { background: rgba(234,179,8,0.12); border-color: #92400e; color: #fde68a; }
.badge-danger { background: rgba(239,68,68,0.12); border-color: #7f1d1d; color: #fecaca; }

/* KPI cards enhancements */
.kpi { position: relative; background: linear-gradient(180deg, rgba(18,26,44,0.8), rgba(16,24,40,0.7)); border: 1px solid #253356; }
.kpi .kpi-icon { width: 28px; height: 28px; display: inline-flex; align-items: center; justify-content: center; border-radius: 8px; background: #0f1a31; border: 1px solid #2a3b63; color: #a7c5ff; }
.kpi .kpi-meta { display:flex; align-items:center; justify-content: space-between; gap:8px; }
.kpi .kpi-trend { font-size: 11px; }
.trend-up { color: #86efac; }
.trend-down { color: #fecaca; }

/* Progress bar */
.progress { height: 8px; background: #0c1529; border: 1px solid #1f2a44; border-radius: 999px; overflow: hidden; }
.progress-bar { height: 100%; background: linear-gradient(90deg, #60a5fa, #22c55e); border-radius: 999px; }

/* Status dot */
.status-dot { width: 8px; height: 8px; border-radius: 50%; display: inline-block; margin-right: 6px; }
.status-ok { background: #22c55e; box-shadow: 0 0 0 2px rgba(34,197,94,0.18); }
.status-warn { background: #eab308; box-shadow: 0 0 0 2px rgba(234,179,8,0.18); }
.status-bad { background: #ef4444; box-shadow: 0 0 0 2px rgba(239,68,68,0.18); }

/* Section title */
.section-title { display:flex; align-items:center; justify-content: space-between; gap: 10px; margin-bottom: 8px; }
.section-title .title { font-weight: 600; color: #dbe8ff; }
.section-sub { color: var(--muted); font-size: 12px; }

/* Map container - force below sidebar */
.map-container { position: relative !important; z-index: 1 !important; height: 500px; }
.map-container .leaflet-container { z-index: 1 !important; height: 100%; }
.map-container .leaflet-control-container { z-index: 2 !important; }
.map-container .leaflet-pane { z-index: 1 !important; }

/* Map viewport - ensure proper height for leaflet */
.map-viewport { height: 100%; width: 100%; }

/* Modal */
dialog { border: none; border-radius: var(--radius); padding: 0; background: rgba(16,24,40,0.92); color: var(--text); }
.modal-card { background: transparent; border: none; padding: var(--space-4); }
.modal-header { display: flex; align-items: center; justify-content: space-between; margin-bottom: var(--space-3); }
.modal-title { font-size: 18px; font-weight: 700; }
.modal-close { background: transparent; border: 1px solid #2a3b63; width: 32px; height: 32px; border-radius: 8px; color: #cfe1ff; cursor: pointer; display: inline-flex; align-items: center; justify-content: center; }
.modal-close:hover { background: #14203a; }

/* Auth pages */
.auth-wrapper { height: 100vh; overflow: hidden; display: grid; grid-template-columns: 3fr 3fr; }
.auth-hero { position: relative; padding: var(--space-3); display: flex; align-items: flex-start; justify-content: flex-start; overflow: hidden; border-right: 1px solid var(--border);
  background: radial-gradient(900px 500px at 10% -10%, rgba(59,130,246,0.25), transparent),
              radial-gradient(900px 500px at 120% 10%, rgba(34,197,94,0.18), transparent),
              linear-gradient(180deg, rgba(14,20,34,0.9), rgba(14,20,34,0.95));
}
/* Animated layers */
.auth-hero::before, .auth-hero::after { content: ""; position: absolute; width: 800px; height: 800px; background: radial-gradient(circle at center, rgba(59,130,246,0.18), transparent 60%); filter: blur(40px); border-radius: 50%; animation: float 14s ease-in-out infinite; pointer-events: none; }
.auth-hero::after { background: radial-gradient(circle at center, rgba(34,197,94,0.16), transparent 60%); width: 700px; height: 700px; animation-duration: 18s; animation-delay: 1.5s; }
@keyframes float { 0% { transform: translate(-40%, -30%) scale(1); } 50% { transform: translate(20%, 10%) scale(1.05); } 100% { transform: translate(-40%, -30%) scale(1); } }
/* Sheen removed as per design; keeping only soft glow orbs */
.auth-hero-inner { max-width: 100%; }
.auth-hero .brand-badge { width: 24px; height: 24px; }
.auth-title { font-size: 22px; font-weight: 800; margin-bottom: var(--space-2); }
.auth-sub { color: var(--muted); font-size: 12px; }
.hero-points { margin-top: 14px; padding-left: 0; list-style: none; }
.hero-points li { display: grid; grid-template-columns: 20px 1fr; align-items: center; gap: 4px; color: #c1d2f7; font-size: 13px; }
.hero-points li span:nth-child(2){
  text-align:left;
}
.hero-points .dot { width: 8px; height: 8px; border-radius: 50%; margin-top: 6px; background: linear-gradient(90deg, #60a5fa, #22c55e); box-shadow: 0 0 10px rgba(99,102,241,0.35); }
.hero-caption { margin-top: 14px; display: inline-block; font-size: 12px; color: #99a9cd; border: 1px solid #223154; background: rgba(12,21,41,0.6); padding: 6px 10px; border-radius: 999px; }
.auth-card { display: flex; align-items: center; justify-content: center; padding: var(--space-3); }
.auth-panel { width: 100%; max-width: 360px; background: var(--card); border: 1px solid var(--border); border-radius: var(--radius); padding: var(--space-3); box-shadow: 0 6px 20px rgba(0,0,0,0.2); }
.auth-footer { margin-top: var(--space-3); font-size: 13px; color: var(--muted); text-align: center;}
.auth-footer a { color: #a7c5ff; text-decoration: none; }
.auth-footer a:hover { text-decoration: underline; }

/* Mobile helpers for auth */
.mobile-only { display: none; }
/* Show CTAs on all screens; specific CTAs are controlled in JSX */
.auth-hero .cta { margin-top: 24px; display: flex; gap: 10px; justify-content: center; }
.password-field { position: relative; }
.password-toggle { position: absolute; right: 8px; top: 50%; transform: translateY(-50%); background: #13203b; border: 1px solid #2a3b63; color: #cfe1ff; border-radius: 6px; padding: 4px 8px; cursor: pointer; font-size: 12px; }
.input-error { color: #fecaca; font-size: 12px; margin-top: 6px; }

/* Form action area */
.form-actions { display: flex; justify-content: center; margin-top: var(--space-2); }

/* Buttons: states */
.btn { position: relative; }
.btn-primary { background: #4ade80; border: 1px solid #22c55e; color: #0f172a; box-shadow: 0 6px 14px rgba(16,185,129,0.18); }
.btn-primary:hover:not([disabled]) { filter: none; background: #22c55e; box-shadow: 0 8px 18px rgba(16,185,129,0.26); }
.btn-secondary { background: #0f1a31; border-color: #2a3b63; color: #cfe1ff; }
.btn-secondary:hover:not([disabled]) { background: #162749; border-color: #395291; }
.btn.loading, .btn[aria-busy="true"] { cursor: wait; }
.btn .spinner { display: inline-block; width: 14px; height: 14px; border: 2px solid rgba(255,255,255,0.4); border-top-color: #ffffff; border-radius: 50%; margin-left: 8px; animation: spin 0.8s linear infinite; vertical-align: -2px; }
@keyframes spin { to { transform: rotate(360deg); } }

/* Button size utility */
.btn-sm { font-size: 12px; padding: 4px 10px; }

/* Blue primary button to match auth panel login button */
.btn-blue {
  background: linear-gradient(135deg, rgba(37,99,235,0.85), rgba(30,64,175,0.85));
  border: 1px solid rgba(59,130,246,0.6);
  color: #eaf2ff;
  backdrop-filter: blur(8px);
  box-shadow: 0 8px 18px rgba(59,130,246,0.25);
}
.btn-blue:hover:not([disabled]) {
  background: linear-gradient(135deg, rgba(59,130,246,0.95), rgba(29,78,216,0.95));
  box-shadow: 0 10px 22px rgba(59,130,246,0.35);
  color: #ffffff;
}

/* KPI cards */
.kpi { position: relative; background: linear-gradient(180deg, rgba(18,26,44,0.8), rgba(16,24,40,0.7)); border: 1px solid #253356; }
.kpi::after { content: ""; position: absolute; inset: 0; border-radius: var(--radius); pointer-events: none; box-shadow: inset 0 0 0 1px rgba(255,255,255,0.02), 0 10px 20px rgba(0,0,0,0.18); }
.kpi-label { color: var(--muted); font-size: 12px; letter-spacing: 0.2px; }
.kpi-value { font-size: 24px; font-weight: 800; letter-spacing: 0.2px; color: #f0f4ff; }

/* Buttons - variants + spacing */
.btn { padding: 6px 10px; border-radius: 6px; font-weight: 600; cursor: pointer; border: 1px solid transparent; transition: filter .15s ease, transform .02s ease, background-color .15s ease, border-color .15s ease; font-size: 13px; }
.btn:active { transform: translateY(1px); }
.btn-primary { background: #4ade80; border: 1px solid #22c55e; color: #0f172a; }
.btn-primary:hover { filter: brightness(1.05); }
.btn-secondary { background: #0f1a31; border-color: #2a3b63; color: #cfe1ff; }
.btn-secondary:hover { background: #13203b; }
.btn + .btn { margin-left: var(--space-2); }

/* Auth page buttons - blue theme to match app */
.auth-panel .btn-primary { background: linear-gradient(135deg, rgba(37,99,235,0.85), rgba(30,64,175,0.85)); border: 1px solid rgba(59,130,246,0.6); color: #eaf2ff; backdrop-filter: blur(8px); box-shadow: 0 8px 18px rgba(59,130,246,0.25); }
.auth-panel .btn-primary:hover:not([disabled]) { background: linear-gradient(135deg, rgba(59,130,246,0.95), rgba(29,78,216,0.95)); box-shadow: 0 10px 22px rgba(59,130,246,0.35); color: #ffffff; }
.auth-panel .btn-primary[disabled] { opacity: 0.6; box-shadow: none; cursor: default; }

/* Sidebar footer and logout button */
.sidebar { display: flex; flex-direction: column; }
.sidebar-footer { margin-top: auto; padding-top: 16px; border-top: 1px solid var(--border); }
.sidebar-user { margin-bottom: 12px; }
.user-name { font-size: 14px; font-weight: 600; color: var(--text); }
.user-role { font-size: 12px; color: var(--muted); text-transform: capitalize; }
.btn-logout { 
  background: transparent; 
  border: 1px solid #dc2626; 
  color: #dc2626; 
  width: 100%; 
  transition: all 0.2s ease;
}
.btn-logout:hover { 
  background: #dc2626; 
  color: white;
  border-color: #dc2626;
  box-shadow: 0 4px 12px rgba(220, 38, 38, 0.2);
}

/* Responsive - Mobile first for auth */
@media (max-width: 768px) {
  .auth-wrapper { grid-template-columns: 1fr; height: 100dvh; }
  .auth-hero, .auth-card { min-height: 100dvh; padding: 20px; }
  .auth-hero { order: 1; border-right: none; }
  .auth-hero .cta { display: flex; }
  .auth-card { order: 2; }
  .mobile-only { display: block; }
  .auth-section-hidden { display: none; }
  .auth-panel { max-width: 100%; padding: 18px; }
  .brand { justify-content: center; }
  .auth-hero-inner { text-align: center; }
  .form-actions { justify-content: stretch; }
  .form-actions .btn-primary { width: 100%; }
}

/* Larger screens: increase font sizes and spacing for auth layout */
@media (min-width: 1024px) {
  .auth-title { font-size: 30px; }
  .auth-sub { font-size: 14px; }
  .hero-points li { font-size: 14px; }
  .hero-caption { font-size: 13px; }
  .auth-hero-inner { max-width: 520px; }
  .auth-hero .brand-badge { width: 28px; height: 28px; }
  .auth-panel { padding: 24px; max-width: 480px; }
  .auth-panel h2 { font-size: 24px; }
  label { font-size: 14px; }
  input, select { font-size: 15px; padding: 11px 14px; margin-bottom: 10px; }
  .btn { font-size: 14px; padding: 10px 14px; }
  .auth-footer { font-size: 14px; }
}

@theme inline { --radius-sm: calc(var(--radius) - 4px); --radius-md: calc(var(--radius) - 2px); --radius-lg: var(--radius); --radius-xl: calc(var(--radius) + 4px); --color-background: var(--background); --color-foreground: var(--foreground); --color-card: var(--card); --color-card-foreground: var(--card-foreground); --color-popover: var(--popover); --color-popover-foreground: var(--popover-foreground); --color-primary: var(--primary); --color-primary-foreground: var(--primary-foreground); --color-secondary: var(--secondary); --color-secondary-foreground: var(--secondary-foreground); --color-muted: var(--muted); --color-muted-foreground: var(--muted-foreground); --color-accent: var(--accent); --color-accent-foreground: var(--accent-foreground); --color-destructive: var(--destructive); --color-border: var(--border); --color-input: var(--input); --color-ring: var(--ring); --color-chart-1: var(--chart-1); --color-chart-2: var(--chart-2); --color-chart-3: var(--chart-3); --color-chart-4: var(--chart-4); --color-chart-5: var(--chart-5); --color-sidebar: var(--sidebar); --color-sidebar-foreground: var(--sidebar-foreground); --color-sidebar-primary: var(--sidebar-primary); --color-sidebar-primary-foreground: var(--sidebar-primary-foreground); --color-sidebar-accent: var(--sidebar-accent); --color-sidebar-accent-foreground: var(--sidebar-accent-foreground); --color-sidebar-border: var(--sidebar-border); --color-sidebar-ring: var(--sidebar-ring); }

.dark { --background: oklch(0.145 0 0); --foreground: oklch(0.985 0 0); --card: oklch(0.205 0 0); --card-foreground: oklch(0.985 0 0); --popover: oklch(0.205 0 0); --popover-foreground: oklch(0.985 0 0); --primary: oklch(0.922 0 0); --primary-foreground: oklch(0.205 0 0); --secondary: oklch(0.269 0 0); --secondary-foreground: oklch(0.985 0 0); --muted: oklch(0.269 0 0); --muted-foreground: oklch(0.708 0 0); --accent: oklch(0.269 0 0); --accent-foreground: oklch(0.985 0 0); --destructive: oklch(0.704 0.191 22.216); --border: oklch(1 0 0 / 10%); --input: oklch(1 0 0 / 15%); --ring: oklch(0.556 0 0); --chart-1: oklch(0.488 0.243 264.376); --chart-2: oklch(0.696 0.17 162.48); --chart-3: oklch(0.769 0.188 70.08); --chart-4: oklch(0.627 0.265 303.9); --chart-5: oklch(0.645 0.246 16.439); --sidebar: oklch(0.205 0 0); --sidebar-foreground: oklch(0.985 0 0); --sidebar-primary: oklch(0.488 0.243 264.376); --sidebar-primary-foreground: oklch(0.985 0 0); --sidebar-accent: oklch(0.269 0 0); --sidebar-accent-foreground: oklch(0.985 0 0); --sidebar-border: oklch(1 0 0 / 10%); --sidebar-ring: oklch(0.556 0 0); }

@layer base {
  * {
    @apply border-border outline-ring/50; }
  body {
    @apply bg-background text-foreground; } }
